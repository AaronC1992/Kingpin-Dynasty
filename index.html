<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>From Dusk to Don</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 10000;
        color: white;
        font-family: 'Arial', sans-serif;
    ">
        <div style="text-align: center;">
            <!-- Game Logo/Title -->
            <img src="From DusktoDonLogo.png" alt="From Dusk to Don" style="max-width: 300px; margin-bottom: 30px; filter: drop-shadow(0 0 20px rgba(255,255,255,0.3));">
            
            <!-- Loading Animation -->
            <div style="margin: 30px 0;">
                <div id="loading-bar" style="
                    width: 300px;
                    height: 6px;
                    background: rgba(255,255,255,0.2);
                    border-radius: 3px;
                    overflow: hidden;
                    margin: 0 auto;
                ">
                    <div id="loading-progress" style="
                        width: 0%;
                        height: 100%;
                        background: linear-gradient(90deg, #e74c3c, #f39c12, #2ecc71);
                        border-radius: 3px;
                        transition: width 0.3s ease;
                    "></div>
                </div>
            </div>
            
            <!-- Loading Text -->
            <div style="margin-top: 20px;">
                <h2 style="margin: 10px 0; color: #ecf0f1;">FROM DUSK TO DON</h2>
                <p id="loading-text" style="margin: 10px 0; color: #bdc3c7; font-size: 16px;">Initializing the underworld...</p>
                <p id="loading-percentage" style="margin: 5px 0; color: #e74c3c; font-size: 18px; font-weight: bold;">0%</p>
                <p style="margin: 5px 0; color: #95a5a6; font-size: 12px;">Detecting screen size and loading assets</p>
                <p style="margin: 15px 0; color: #f39c12; font-size: 13px; font-weight: bold;">
                    ğŸ’¡ If loading gets stuck, try refreshing the page (F5 or Ctrl+R)
                </p>
            </div>
            
            <!-- Loading Spinner -->
            <div style="margin-top: 30px;">
                <div style="
                    width: 40px;
                    height: 40px;
                    border: 3px solid rgba(255,255,255,0.3);
                    border-top: 3px solid #e74c3c;
                    border-radius: 50%;
                    animation: spin 1s linear infinite;
                    margin: 0 auto;
                "></div>
            </div>
        </div>
    </div>
    
    <div id="game" style="display: none;">
        <!-- Stats bar at the top that is always visible -->
        <div id="stats-bar">
            <div class="player-info">
                <img id="player-portrait" src="" alt="Player" style="display: none;" />
                <div class="player-details">
                    <span id="player-name-display">Criminal</span>
                </div>
            </div>
            <div class="stats-container">
                <p id="money-display">Money: $0</p>
                <p id="power-display">Power: 0</p>
                <p id="territory-display" style="display: none;">Territories: 0 | Income: $0/week</p>
                <p id="health-display">Health: 100</p>
                <p id="energy-display">Energy: 100/100</p>
                <p id="wanted-level-display">Wanted Level: 0</p>
                <p id="reputation-display">Reputation: 0</p>
                <p id="level-display">Level: 1</p>
                <p id="experience-display">XP: 0/100</p>
                <p id="skill-points-display">Skill Points: 0</p>
                <p id="season-display">Season: Spring</p>
                <p id="ammo-display">Ammo: 0</p>
                <p id="gas-display">Gas: 0</p>
                <p id="inventory-display">Inventory: 0 Items</p>
                <p id="stolen-cars-display">Garage: 0 vehicles</p>
            </div>
        </div>

        <!-- Action Log -->
        <div id="action-log">
            <h3>Action Log</h3>
            <ul id="log-list"></ul>
        </div>

        <!-- Intro Screen -->
        <div id="intro-screen">
            <div style="text-align: center; margin-bottom: 30px;">
                <img src="From DusktoDonLogo.png" alt="From Dusk to Don Logo" 
                     style="max-width: 400px; width: 90%; height: auto; border-radius: 15px; 
                            box-shadow: 0 8px 25px rgba(0,0,0,0.5); border: 3px solid #e74c3c;" />
            </div>
            <h1>Welcome to From Dusk to Don!</h1>
            <button onclick="startGame()">Start Game</button>
            <button onclick="loadGameFromIntro()" style="background: linear-gradient(45deg, #27ae60, #2ecc71); margin-left: 10px;">Load Game</button>
            <button onclick="startTutorial()" style="background: linear-gradient(45deg, #3498db, #2980b9); margin-left: 10px;">Tutorial</button>
            <button onclick="forceNewGame()" style="background: linear-gradient(45deg, #e74c3c, #c0392b); margin-left: 10px; font-size: 12px;">Delete Save</button>
        </div>

        <!-- Character Creation Screen -->
        <div id="character-creation-screen" style="display: none;">
            <div id="character-creation-content">
                <h1>ğŸ­ Create Your Criminal</h1>
                <p>Choose your identity before you hit the streets. This will be your face in the underworld.</p>
                
                <div class="character-form">
                    <div class="name-section">
                        <h3>What's your name?</h3>
                        <input type="text" id="character-name" placeholder="Enter your name..." maxlength="20" />
                    </div>
                    
                    <div class="gender-section">
                        <h3>Gender</h3>
                        <div class="selection-grid">
                            <button class="selection-btn" data-gender="male" onclick="selectGender('male')">
                                <span class="selection-label">â™‚ï¸</span>
                            </button>
                            <button class="selection-btn" data-gender="female" onclick="selectGender('female')">
                                <span class="selection-label">â™€ï¸</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="ethnicity-section">
                        <h3>Background</h3>
                        <div class="selection-grid ethnicity-grid">
                            <button class="selection-btn portrait-btn" data-ethnicity="white" onclick="selectEthnicity('white')">
                                <img class="portrait-preview" id="portrait-white" src="" alt="Portrait Option 1" style="display: none;" />
                            </button>
                            <button class="selection-btn portrait-btn" data-ethnicity="black" onclick="selectEthnicity('black')">
                                <img class="portrait-preview" id="portrait-black" src="" alt="Portrait Option 2" style="display: none;" />
                            </button>
                            <button class="selection-btn portrait-btn" data-ethnicity="asian" onclick="selectEthnicity('asian')">
                                <img class="portrait-preview" id="portrait-asian" src="" alt="Portrait Option 3" style="display: none;" />
                            </button>
                            <button class="selection-btn portrait-btn" data-ethnicity="mexican" onclick="selectEthnicity('mexican')">
                                <img class="portrait-preview" id="portrait-mexican" src="" alt="Portrait Option 4" style="display: none;" />
                            </button>
                        </div>
                    </div>
                    
                    <div class="character-preview">
                        <h3>Your Character</h3>
                        <div class="preview-card">
                            <img id="selected-portrait" src="" alt="Character Portrait" style="display: none;" />
                            <div class="preview-info">
                                <div id="preview-name">Name: Not set</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="creation-buttons">
                        <button id="create-character-btn" onclick="createCharacter()" disabled>
                            ğŸ¯ Enter the Criminal World
                        </button>
                        <button onclick="goBackToIntro()" style="background: #7f8c8d; margin-left: 10px;">
                            â† Back
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tutorial Screen -->
        <div id="tutorial-screen" style="display:none;">
            <div id="tutorial-content">
                <h2 id="tutorial-title">Tutorial</h2>
                <div id="tutorial-text"></div>
                <div id="tutorial-buttons" style="margin-top: 20px;">
                    <button onclick="previousTutorialStep()" id="prev-btn" style="display:none;">Previous</button>
                    <button onclick="nextTutorialStep()" id="next-btn">Next</button>
                    <button onclick="skipTutorial()" id="skip-btn" style="background: linear-gradient(45deg, #e74c3c, #c0392b); margin-left: 20px;">Skip Tutorial</button>
                </div>
                <div id="tutorial-progress" style="margin-top: 15px; font-size: 14px; color: #bdc3c7;">
                    Step <span id="tutorial-step">1</span> of <span id="tutorial-total">7</span>
                    <br><span style="font-size: 12px; color: #95a5a6;">ğŸ’¡ Use arrow keys or Enter to navigate, Esc to skip</span>
                </div>
            </div>
        </div>

        <!-- Intro Narrative Screen -->
        <div id="intro-narrative" style="display:none;">
            <!-- Content will be dynamically generated by JavaScript -->
        </div>

        <!-- Main Menu -->
        <div id="menu" class="game-screen" style="display:none;">
            <h1>From Dusk to Don</h1>
            <div class="menu-grid">
                <button onclick="showJobs()">ğŸ”« Jobs</button>
                <button onclick="showMissions()">ğŸ¯ Missions</button>
                <button onclick="showStore()">ğŸª Store</button>
                <button onclick="showRealEstate()">ğŸ¢ Real Estate</button>
                <button onclick="showGlobalChat()">ğŸ’¬ Global Chat</button>
                <button onclick="showInventory()">ğŸ’ Inventory</button>
                <button onclick="showStolenCars()">ğŸ  Garage</button>
                <button onclick="showSkills()">ğŸ§  Skills</button>
                <button onclick="showGang()">ğŸ‘¥ Gang</button>
                <button onclick="showBusinesses()">ğŸ­ Businesses</button>
                <button onclick="showLoanShark()">ğŸ’° Loan Shark</button>
                <button onclick="showMoneyLaundering()">ğŸ§¼ Laundering</button>
                <button onclick="showTerritoryControl()">ğŸ›ï¸ Territory Control</button>
                <button onclick="showEventsStatus()">ğŸŒŸ Events</button>
                <button onclick="showJailbreak()">ğŸ”“ Jailbreak</button>
                <button onclick="showMiniGames()">ğŸ® Mini Games</button>
                <button onclick="showEmpireRating()">â­ Empire Rating</button>
                <button onclick="showHallOfFame()">ğŸ›ï¸ Hall of Fame</button>
                <button onclick="showCompetition()">ğŸ† Competition</button>
                <button onclick="showCourtHouse()">âš–ï¸ Court House</button>
                <button onclick="showHospital()">ğŸ¥ Hospital</button>
                <button onclick="showCasino()">ğŸ° Casino</button>
                <button onclick="showOptions()">âš™ï¸ Options</button>
            </div>
        </div>

        <!-- Gameplay Screen -->
        <div id="gameplay" class="game-screen" style="display:none;">
            <h2>Gameplay Screen</h2>
            <button onclick="showJobs()">Go to Jobs</button>
            <button onclick="showStore()">Go to Store</button>
        </div>

        <!-- Store Screen -->
        <div id="store-screen" class="game-screen" style="display:none;">
            <h2>ğŸ›’ Criminal Supply Store</h2>
            <p>Everything a criminal needs to build their empire and survive the streets.</p>
            
            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px; margin-top: 20px;">
                <div>
                    <h3 style="color: #3498db; border-bottom: 2px solid #3498db; padding-bottom: 8px;">Available Items</h3>
                    <ul id="item-list" style="list-style: none; padding: 0;"></ul>
                </div>
                
                <div>
                    <h3 style="color: #2ecc71; border-bottom: 2px solid #2ecc71; padding-bottom: 8px;">Your Inventory</h3>
                    <ul id="inventory-list" style="list-style: none; padding: 0;"></ul>
                </div>
            </div>
            
            <button onclick="goBackToMainMenu()" style="margin-top: 20px;">Back to Main Menu</button>
        </div>

        <!-- Real Estate Screen -->
        <div id="real-estate-screen" class="game-screen" style="display:none;">
            <h2>ğŸ¢ Real Estate</h2>
            <div id="real-estate-content"></div>
            <button onclick="goBackToMainMenu()">Back to Main Menu</button>
        </div>

        <!-- Jobs Screen -->
        <div id="jobs-screen" class="game-screen" style="display:none;">
            <h2>Jobs</h2>
            <p>Earn money by working!</p>
            <ul id="job-list"></ul> <!-- Dynamically filled by JS -->
            <button onclick="goBackToMainMenu()">Back to Main Menu</button>
        </div>

        <!-- Jail Screen -->
        <div id="jail-screen" class="game-screen" style="display:none;">
            <h2>You've been caught and sent to jail!</h2>
            <div id="player-jail-portrait" style="text-align: center; margin: 20px 0;">
                <!-- Player portrait will be inserted here -->
            </div>
            <p id="jail-timer">You are stuck in jail for <span id="jail-time">10</span> seconds.</p>
            <button id="breakout-button" onclick="attemptBreakout()">Try to Break Out</button>
            
            <h3>Other Prisoners</h3>
            <p>You can attempt to break out other prisoners for experience, but there's a risk of getting caught!</p>
            <div id="prisoner-list"></div>
            
            <!-- TikTakToe Mini-Game Section -->
            <div id="tiktaktoe-section" style="margin-top: 30px; padding: 20px; background: rgba(52, 73, 94, 0.6); border-radius: 10px; border: 2px solid #3498db;">
                <h3 style="color: #3498db; text-align: center;">ğŸ® TikTakToe with Cellmates</h3>
                <p style="text-align: center; margin-bottom: 20px;">Pass the time by playing TikTakToe with other prisoners. Challenge your mind and stay sharp!</p>
                
                <div id="tiktaktoe-game" style="display: none;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <p id="current-player" style="font-size: 1.2em; font-weight: bold;">Your turn (X)</p>
                        <p id="game-status" style="color: #3498db;">Playing against your cellmate</p>
                    </div>
                    
                    <div id="tiktaktoe-board" style="display: grid; grid-template-columns: repeat(3, 80px); grid-gap: 5px; justify-content: center; margin: 20px auto;">
                        <button class="tiktaktoe-cell" onclick="makeMove(0)" style="width: 80px; height: 80px; font-size: 24px; font-weight: bold; background: #34495e; color: white; border: 2px solid #7f8c8d; border-radius: 5px; cursor: pointer;"></button>
                        <button class="tiktaktoe-cell" onclick="makeMove(1)" style="width: 80px; height: 80px; font-size: 24px; font-weight: bold; background: #34495e; color: white; border: 2px solid #7f8c8d; border-radius: 5px; cursor: pointer;"></button>
                        <button class="tiktaktoe-cell" onclick="makeMove(2)" style="width: 80px; height: 80px; font-size: 24px; font-weight: bold; background: #34495e; color: white; border: 2px solid #7f8c8d; border-radius: 5px; cursor: pointer;"></button>
                        <button class="tiktaktoe-cell" onclick="makeMove(3)" style="width: 80px; height: 80px; font-size: 24px; font-weight: bold; background: #34495e; color: white; border: 2px solid #7f8c8d; border-radius: 5px; cursor: pointer;"></button>
                        <button class="tiktaktoe-cell" onclick="makeMove(4)" style="width: 80px; height: 80px; font-size: 24px; font-weight: bold; background: #34495e; color: white; border: 2px solid #7f8c8d; border-radius: 5px; cursor: pointer;"></button>
                        <button class="tiktaktoe-cell" onclick="makeMove(5)" style="width: 80px; height: 80px; font-size: 24px; font-weight: bold; background: #34495e; color: white; border: 2px solid #7f8c8d; border-radius: 5px; cursor: pointer;"></button>
                        <button class="tiktaktoe-cell" onclick="makeMove(6)" style="width: 80px; height: 80px; font-size: 24px; font-weight: bold; background: #34495e; color: white; border: 2px solid #7f8c8d; border-radius: 5px; cursor: pointer;"></button>
                        <button class="tiktaktoe-cell" onclick="makeMove(7)" style="width: 80px; height: 80px; font-size: 24px; font-weight: bold; background: #34495e; color: white; border: 2px solid #7f8c8d; border-radius: 5px; cursor: pointer;"></button>
                        <button class="tiktaktoe-cell" onclick="makeMove(8)" style="width: 80px; height: 80px; font-size: 24px; font-weight: bold; background: #34495e; color: white; border: 2px solid #7f8c8d; border-radius: 5px; cursor: pointer;"></button>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button onclick="quitTikTakToe()" style="background: #e74c3c; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
                            Quit Game
                        </button>
                    </div>
                </div>
                
                <div id="tiktaktoe-start" style="text-align: center;">
                    <p>Ready to challenge a cellmate to a game of wits?</p>
                    <div style="margin: 15px 0;">
                        <button onclick="startTikTakToe()" style="background: #2ecc71; color: white; padding: 15px 25px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px;">
                            ğŸ¯ Start New Game
                        </button>
                    </div>
                    <p style="font-size: 0.9em; color: #95a5a6;">Play for fun and mental stimulation - no money involved!</p>
                </div>
            </div>
        </div>

        <!-- Court House Screen -->
        <div id="court-house-screen" class="game-screen" style="display:none;">
            <h2>Court House</h2>
            <p>Pay a smaller fine and serve jail time to reset your wanted level to 0.</p>
            <button id="reset-wanted-level-court-house" onclick="resetWantedLevelCourtHouse()">Reset Wanted Level for $0</button>
            <button onclick="goBackToMainMenu()">Back to Main Menu</button>
        </div>

        <!-- Hospital Screen -->
        <div id="hospital-screen" class="game-screen" style="display:none;">
            <h2>Hospital</h2>
            <p>Pay money to refill your health.</p>
            <button id="heal-button" onclick="healAtHospital()">Refill Health</button>
            <button onclick="goBackToMainMenu()">Back to Main Menu</button>
        </div>

        <!-- Inventory Screen -->
        <div id="inventory-screen" class="game-screen" style="display:none;">
            <h2>Inventory</h2>
            <ul id="inventory-list"></ul>
            <p id="ammo-display-inventory">Ammo: 0</p>
            <p id="gas-display-inventory">Gas: 0</p>
            <button onclick="goBackToMainMenu()">Back to Main Menu</button>
        </div>

        <!-- Death Screen -->
        <div id="death-screen" class="game-screen" style="display:none;">
            <h2>You Died!</h2>
            <p>It's a permadeath. You need to start over.</p>
            <button onclick="restartGame()">Restart Game</button>
        </div>

        <!-- Pharmacy Screen -->
        <div id="pharmacy-screen" class="game-screen" style="display:none;">
            <h2>Pharmacy</h2>
            <p>Buy drugs to sell!</p>
            <ul id="pharmacy-item-list"></ul>
            <button onclick="goBackToMainMenu()">Back to Main Menu</button>
        </div>

        <!-- Casino Screen -->
        <div id="casino-screen" class="game-screen" style="display:none;">
            <h2>Casino</h2>
            <p>Try your luck at the casino!</p>
            <button onclick="playSlotMachine()">Play Slot Machine ($100)</button>
            <button onclick="playRoulette()">Play Roulette ($200)</button>
            <button onclick="goBackToMainMenu()">Back to Main Menu</button>
        </div>

        <!-- Options Screen -->
        <div id="options-screen" class="game-screen" style="display:none;">
            <h2>Options</h2>
            <button onclick="showSaveSystem()">ğŸ’¾ Save System</button>
            <button onclick="showTutorialFromMenu()">ğŸ“– Tutorial</button>
            <button onclick="loadGame()">Load Game</button>
            <button onclick="deleteSavedGame()">ğŸ—‘ï¸ Delete Save</button>
            <button onclick="confirmResetGame()">Reset Game</button>
            <button onclick="goBackToMainMenu()">Back to Main Menu</button>
        </div>

        <!-- Skills Screen -->
        <div id="skills-screen" class="game-screen" style="display:none;">
            <div id="skills-content"></div>
        </div>

        <!-- Gang Screen -->
        <div id="gang-screen" class="game-screen" style="display:none;">
            <div id="gang-content"></div>
        </div>

        <!-- Recruitment Screen -->
        <div id="recruitment-screen" class="game-screen" style="display:none;">
            <div id="recruitment-content"></div>
        </div>

        <!-- Achievements Screen -->
        <div id="achievements-screen" class="game-screen" style="display:none;">
            <div id="achievements-content"></div>
        </div>

        <!-- Vehicle Garage Screen -->
        <div id="stolen-cars-screen" class="game-screen" style="display:none;">
            <div id="stolen-cars-content"></div>
        </div>

        <!-- Jailbreak Screen -->
        <div id="jailbreak-screen" class="game-screen" style="display:none;">
            <h2>ğŸ”“ Underground Jailbreak Network</h2>
            <p>Scout the local detention centers and help fellow criminals escape. Higher risk means higher rewards, but getting caught will land you in the slammer too!</p>
            
            <div id="available-prisoners">
                <h3>Prisoners Awaiting Liberation</h3>
                <div id="jailbreak-prisoner-list"></div>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: rgba(231, 76, 60, 0.2); border-radius: 8px; border: 1px solid #e74c3c;">
                <h4>âš ï¸ Jailbreak Risks</h4>
                <p>â€¢ Failed attempts may result in arrest</p>
                <p>â€¢ Stealth skill reduces detection chance</p>
                <p>â€¢ Energy required for each attempt</p>
                <p>â€¢ Reputation and XP rewards for success</p>
            </div>
            
            <button onclick="refreshPrisoners()">ğŸ”„ Scout for New Prisoners</button>
            <button onclick="goBackToMainMenu()">Back to Main Menu</button>
        </div>

        <!-- Mini Games Screen -->
        <div id="mini-games-screen" class="game-screen" style="display:none;">
            <h2>ğŸ® Criminal's Arcade</h2>
            <p style="text-align: center; margin-bottom: 30px;">Take a break from the criminal life and test your skills in these entertaining mini-games! <strong style="color: #2ecc71;">Win $100 for each victory!</strong></p>
            
            <!-- Game Selection Grid -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 30px 0;">
                <!-- TikTakToe -->
                <div class="mini-game-card" style="background: rgba(52, 73, 94, 0.8); border-radius: 15px; padding: 25px; border: 2px solid #3498db; text-align: center;">
                    <h3 style="color: #3498db; margin-bottom: 15px;">ğŸ¯ TikTakToe</h3>
                    <p style="margin-bottom: 20px;">Classic strategy game. Challenge the AI and prove your tactical superiority! <strong style="color: #2ecc71;">Win: +$100</strong></p>
                    <button onclick="startMiniGameTikTakToe()" style="background: #3498db; color: white; padding: 12px 25px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px;">
                        Play TikTakToe
                    </button>
                </div>
                
                <!-- Number Guessing Game -->
                <div class="mini-game-card" style="background: rgba(52, 73, 94, 0.8); border-radius: 15px; padding: 25px; border: 2px solid #2ecc71; text-align: center;">
                    <h3 style="color: #2ecc71; margin-bottom: 15px;">ğŸ”¢ Number Hunter</h3>
                    <p style="margin-bottom: 20px;">Guess the secret number between 1-100. Use your intuition and deduction skills! <strong style="color: #2ecc71;">Win: +$100</strong></p>
                    <button onclick="startNumberGuessing()" style="background: #2ecc71; color: white; padding: 12px 25px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px;">
                        Play Number Hunter
                    </button>
                </div>
                
                <!-- Rock Paper Scissors -->
                <div class="mini-game-card" style="background: rgba(52, 73, 94, 0.8); border-radius: 15px; padding: 25px; border: 2px solid #e74c3c; text-align: center;">
                    <h3 style="color: #e74c3c; margin-bottom: 15px;">âœ‚ï¸ Rock Paper Scissors</h3>
                    <p style="margin-bottom: 20px;">Classic hand game. Best of 5 rounds against a cunning opponent! <strong style="color: #2ecc71;">Win match: +$100</strong></p>
                    <button onclick="startRockPaperScissors()" style="background: #e74c3c; color: white; padding: 12px 25px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px;">
                        Play RPS
                    </button>
                </div>
                
                <!-- Memory Match -->
                <div class="mini-game-card" style="background: rgba(52, 73, 94, 0.8); border-radius: 15px; padding: 25px; border: 2px solid #f39c12; text-align: center;">
                    <h3 style="color: #f39c12; margin-bottom: 15px;">ğŸ§  Memory Match</h3>
                    <p style="margin-bottom: 20px;">Test your memory by matching pairs of cards. Beat the clock and your records! <strong style="color: #2ecc71;">Under 60s: +$100 | New Best: +$500</strong></p>
                    <button onclick="startMemoryMatch()" style="background: #f39c12; color: white; padding: 12px 25px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px;">
                        Play Memory Match
                    </button>
                </div>
                
                <!-- Snake Game -->
                <div class="mini-game-card" style="background: rgba(52, 73, 94, 0.8); border-radius: 15px; padding: 25px; border: 2px solid #9b59b6; text-align: center;">
                    <h3 style="color: #9b59b6; margin-bottom: 15px;">ğŸ Snake</h3>
                    <p style="margin-bottom: 20px;">Control the snake, eat the food, grow longer. Don't hit the walls or yourself! <strong style="color: #2ecc71;">Earn $50 per food eaten!</strong></p>
                    <button onclick="startSnakeGame()" style="background: #9b59b6; color: white; padding: 12px 25px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px;">
                        Play Snake
                    </button>
                </div>
                
                <!-- Reaction Time -->
                <div class="mini-game-card" style="background: rgba(52, 73, 94, 0.8); border-radius: 15px; padding: 25px; border: 2px solid #1abc9c; text-align: center;">
                    <h3 style="color: #1abc9c; margin-bottom: 15px;">âš¡ Quick Draw</h3>
                    <p style="margin-bottom: 20px;">Test your reflexes! Click when green for rewards. <strong style="color: #2ecc71;">Under 300ms: +$100 | New Best: +$500</strong></p>
                    <button onclick="startQuickDraw()" style="background: #1abc9c; color: white; padding: 12px 25px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px;">
                        Play Quick Draw
                    </button>
                </div>
            </div>
            
            <!-- Individual Game Areas (Hidden by Default) -->
            
            <!-- TikTakToe Game Area -->
            <div id="minigame-tiktaktoe" style="display: none; margin-top: 40px; padding: 30px; background: rgba(52, 73, 94, 0.9); border-radius: 15px; border: 2px solid #3498db;">
                <h3 style="color: #3498db; text-align: center; margin-bottom: 20px;">ğŸ¯ TikTakToe Challenge</h3>
                
                <div id="mg-tiktaktoe-game" style="display: none;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <p id="mg-current-player" style="font-size: 1.2em; font-weight: bold;">Your turn (X)</p>
                        <p id="mg-game-status" style="color: #3498db;">Make your move!</p>
                    </div>
                    
                    <div id="mg-tiktaktoe-board" style="display: grid; grid-template-columns: repeat(3, 80px); grid-gap: 5px; justify-content: center; margin: 20px auto;">
                        <button class="mg-tiktaktoe-cell" onclick="mgMakeMove(0)" style="width: 80px; height: 80px; font-size: 24px; font-weight: bold; background: #34495e; color: white; border: 2px solid #7f8c8d; border-radius: 5px; cursor: pointer;"></button>
                        <button class="mg-tiktaktoe-cell" onclick="mgMakeMove(1)" style="width: 80px; height: 80px; font-size: 24px; font-weight: bold; background: #34495e; color: white; border: 2px solid #7f8c8d; border-radius: 5px; cursor: pointer;"></button>
                        <button class="mg-tiktaktoe-cell" onclick="mgMakeMove(2)" style="width: 80px; height: 80px; font-size: 24px; font-weight: bold; background: #34495e; color: white; border: 2px solid #7f8c8d; border-radius: 5px; cursor: pointer;"></button>
                        <button class="mg-tiktaktoe-cell" onclick="mgMakeMove(3)" style="width: 80px; height: 80px; font-size: 24px; font-weight: bold; background: #34495e; color: white; border: 2px solid #7f8c8d; border-radius: 5px; cursor: pointer;"></button>
                        <button class="mg-tiktaktoe-cell" onclick="mgMakeMove(4)" style="width: 80px; height: 80px; font-size: 24px; font-weight: bold; background: #34495e; color: white; border: 2px solid #7f8c8d; border-radius: 5px; cursor: pointer;"></button>
                        <button class="mg-tiktaktoe-cell" onclick="mgMakeMove(5)" style="width: 80px; height: 80px; font-size: 24px; font-weight: bold; background: #34495e; color: white; border: 2px solid #7f8c8d; border-radius: 5px; cursor: pointer;"></button>
                        <button class="mg-tiktaktoe-cell" onclick="mgMakeMove(6)" style="width: 80px; height: 80px; font-size: 24px; font-weight: bold; background: #34495e; color: white; border: 2px solid #7f8c8d; border-radius: 5px; cursor: pointer;"></button>
                        <button class="mg-tiktaktoe-cell" onclick="mgMakeMove(7)" style="width: 80px; height: 80px; font-size: 24px; font-weight: bold; background: #34495e; color: white; border: 2px solid #7f8c8d; border-radius: 5px; cursor: pointer;"></button>
                        <button class="mg-tiktaktoe-cell" onclick="mgMakeMove(8)" style="width: 80px; height: 80px; font-size: 24px; font-weight: bold; background: #34495e; color: white; border: 2px solid #7f8c8d; border-radius: 5px; cursor: pointer;"></button>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button onclick="mgQuitTikTakToe()" style="background: #e74c3c; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
                            New Game
                        </button>
                    </div>
                </div>
                
                <div id="mg-tiktaktoe-start" style="text-align: center;">
                    <p>Ready to challenge the AI to a battle of wits?</p>
                    <div style="margin: 15px 0;">
                        <button onclick="mgStartTikTakToe()" style="background: #3498db; color: white; padding: 15px 25px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px;">
                            ğŸ¯ Start Game
                        </button>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button onclick="backToMiniGamesList()" style="background: #95a5a6; color: white; padding: 12px 25px; border: none; border-radius: 8px; cursor: pointer;">
                        â† Back to Games
                    </button>
                </div>
            </div>
            
            <!-- Other Game Areas Will Be Added Here -->
            <div id="other-minigames" style="display: none; margin-top: 40px; padding: 30px; background: rgba(52, 73, 94, 0.9); border-radius: 15px;">
                <div id="minigame-content"></div>
                <div style="text-align: center; margin-top: 20px;">
                    <button onclick="backToMiniGamesList()" style="background: #95a5a6; color: white; padding: 12px 25px; border: none; border-radius: 8px; cursor: pointer;">
                        â† Back to Games
                    </button>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 40px;">
                <button onclick="goBackToMainMenu()" style="background: linear-gradient(45deg, #95a5a6, #7f8c8d); color: white; padding: 18px 35px; border: none; border-radius: 12px; font-size: 1.3em; font-weight: bold; cursor: pointer;">
                    ğŸ  Back to Main Menu
                </button>
            </div>
        </div>

        <!-- Missions Screen -->
        <div id="missions-screen" class="game-screen" style="display:none;">
            <div id="missions-content">
                <!-- Content will be generated by JavaScript -->
            </div>
        </div>

        <!-- Business Management Screen -->
        <div id="business-screen" class="game-screen" style="display:none;">
            <div id="business-content">
                <!-- Content will be generated by JavaScript -->
            </div>
        </div>

        <!-- Loan Shark Screen -->
        <div id="loan-shark-screen" class="game-screen" style="display:none;">
            <div id="loan-shark-content">
                <!-- Content will be generated by JavaScript -->
            </div>
        </div>

        <!-- Money Laundering Screen -->
        <div id="money-laundering-screen" class="game-screen" style="display:none;">
            <div id="money-laundering-content">
                <!-- Content will be generated by JavaScript -->
            </div>
        </div>

        <!-- Territory Control Screen -->
        <div id="territory-control-screen" class="game-screen" style="display:none;">
            <div id="territory-control-content">
                <!-- Content will be generated by JavaScript -->
            </div>
        </div>

        <!-- Events Screen -->
        <div id="events-screen" class="game-screen" style="display:none;">
            <div id="events-content">
                <!-- Content will be generated by JavaScript -->
            </div>
        </div>

        <!-- Map System Screen -->
        <div id="map-screen" class="game-screen" style="display:none;">
            <div id="map-content">
                <!-- Content will be generated by JavaScript -->
            </div>
        </div>

        <!-- Calendar Screen -->
        <div id="calendar-screen" class="game-screen" style="display:none;">
            <div id="calendar-content">
                <!-- Content will be generated by JavaScript -->
            </div>
        </div>

        <!-- Statistics Screen -->
        <div id="statistics-screen" class="game-screen" style="display:none;">
            <div id="statistics-content">
                <!-- Content will be generated by JavaScript -->
            </div>
        </div>

        <!-- Multiplayer Screen -->
        <div id="multiplayer-screen" class="game-screen" style="display:none;">
            <div id="multiplayer-content">
                <!-- Content will be generated by JavaScript -->
            </div>
        </div>

        <!-- Right Side Panel -->
        <div id="right-panel">
            <div id="quick-actions">
                <h3>Quick Actions</h3>
                <button onclick="goBackToMainMenu()" class="quick-btn main-menu-btn">
                    ğŸ  Main Menu
                </button>
                <button onclick="showGlobalChat()" class="quick-btn">
                    ğŸ’¬ Global Chat
                </button>
                <button onclick="showJobs()" class="quick-btn">
                    ğŸ’¼ Jobs
                </button>
                <button onclick="showStore()" class="quick-btn">
                    ğŸ›’ Store
                </button>
                <button onclick="showRealEstate()" class="quick-btn">
                    ğŸ¢ Real Estate
                </button>
                <button onclick="showBusinesses()" class="quick-btn">
                    ğŸ­ Businesses
                </button>
                <button onclick="showLoanShark()" class="quick-btn">
                    ğŸ’° Loans
                </button>
                <button onclick="showSkills()" class="quick-btn">
                    ğŸ“š Skills
                </button>
                <button onclick="showStolenCars()" class="quick-btn">
                    ğŸš— Garage
                </button>
                <button onclick="saveGame()" class="quick-btn save-btn">
                    ğŸ’¾ Save Game
                </button>
            </div>
            
            <div id="quick-stats">
                <h3>Quick Stats</h3>
                <div class="stat-item">
                    <span class="stat-label">ğŸ’°</span>
                    <span id="quick-money">$0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ğŸ’¸</span>
                    <span id="quick-dirty-money">$0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">â¤ï¸</span>
                    <span id="quick-health">100</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">âš¡</span>
                    <span id="quick-energy">100</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">â­</span>
                    <span id="quick-level">1</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ğŸ¯</span>
                    <span id="quick-reputation">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ğŸ”</span>
                    <span id="quick-suspicion">0</span>
                </div>
            </div>
            
            <div id="energy-actions">
                <h3>Energy</h3>
                <div id="energy-bar">
                    <div id="energy-fill"></div>
                    <span id="energy-text">100/100</span>
                </div>
                <button onclick="buyEnergyDrink()" class="quick-btn energy-btn">
                    ğŸ¥¤ Energy Drink ($15)
                </button>
                <button onclick="buyCoffee()" class="quick-btn energy-btn">
                    â˜• Coffee ($8)
                </button>
            </div>
            
            <div id="game-info">
                <h3>Game Info</h3>
                <div class="info-item">
                    <small>Next Energy: <span id="energy-timer">-</span></small>
                </div>
                <div class="info-item">
                    <small>Jail Status: <span id="jail-status">Free</span></small>
                </div>
                <div class="info-item">
                    <small>Cars Owned: <span id="cars-count">0</span></small>
                </div>
            </div>
        </div>

        <!-- Hurt Flash -->
        <div id="hurt-flash"></div>
    </div>

    <script src="mobile-responsive.js"></script>
    <script src="game.js"></script>
</body>
</html>